# 웹서버와 CGI와 WAS와 서블릿

## HTTP

웹이 처음 나올때에는 단순히 문서와 사진을 열람하기 위한 기능밖에 없었다. 그 문서들과 사진은 단순히 서버 내에 존재하는 "파일" 이며 이는 서버에서 별도로 바꾸지 않는 이상 언제 접근하던 항상 동일한 결과물을 반환해 준다.

HTTP는 이런 문서와 사진을 서버와 클라이언트와 교환하기 위해 나온 프로토콜이다. HTTP 약자 자체가 하이퍼텍스트 전송 프로토콜이란 뜻으로 "하이퍼텍스트" 라는 것을 서버에서 클라이언트로 전송하기 위한 프로토콜이다.

## 웹서버

보통 "웹 서버" 라는 말은 개념적으로 의미가 조금씩 달라질 수 있다. 하드웨어 자체를 웹서버라고 부르거나 그 하드웨어 내에서 구동되고 있는 프로그램을 지칭할 수 있다.

프로그램 관점에서 웹 서버는 HTTP Request가 날라오면 거기에 대해 무엇인가 응답을 해 주는 프로그램을 의미한다. 그러니까 서버에 있는 파일을 단순히 전달해 주거나 클라이언트의 요청을 다른 곳으로 전달하는 프록시 동작을 할 수도 있는 것이다.

웹 서버는 WAS와 비교되어 설명되는 경우가 많은데 WAS와 비교되는 "웹 서버" 의 기능은 서버에 존재하는 파일을 요청에 따라 클라이언트에 전달해 주는 것을 의미한다.

## CGI

웹 환경이 발전하면서 웹에 동적인 요소를 넣을 필요가 생겼다. 서버에 존재하는 동적인 파일을 사용자의 요청에 따라 결과물을 다르게 출력해야 할 필요가 생긴 것이다.

그래서 CGI 프로토콜이 나오게 되었으며 CGI 프로토콜은 서버가 프로세스를 실행한 결과를 클라이언트로 전송하는 일종의 게이트웨이(게이트웨이란 네트워크에서 서로 다른 통신망 간 통신하게 해주는것을 의미한다) 프로토콜이다.

CGI로 동작되는 프로그램은 매우 다양하며 쉘 프로그램, 펄, CGI, Python, PHP 등이 있다.

CGI를 따르는 프로그램은 보통 웹 서버에 대해 부속으로 동작된다.

### CGI와 Perl

CGI 표준이 생긴 이후 Perl과 CGI는 밀접한 관계가 있었다. Perl은 단순한 스크립트 언어이지만 CGI를 이용해 동적인 웹사이트를 구현할 때에도 많이 사용된다.

웹 서버에서 확장자가 .cgi 인 파일은 대부분 perl로 구현된 동적인 웹 페이지 스크립트를 의미하는 파일이다. (항상 그런 것은 아니다)

### FastCGI

하지만 CGI는 요청을 날리게 될 때 프로세스를 새로 생성하는 문제가 있어 오버헤드가 심하다는 단점이 있다. FastCGI는 CGI로 동작되는 요청에 대해 프로세스를 새로 생성하는 것이 아니라 이미 실행중인 CGI 프로세스에 unix나 소켓 프로토콜을 이용해 요청을 주고 받는 식으로 발전하였다.

## WAS

WAS의 의미는 웹 어플리케이션 서버라는 뜻이다. WAS는 보통 자바로 웹 개발을 할 때 사용되는 용어이자 개념으로 HTTP 프로토콜을 통해서 클라이언트와 서버 간 통신을 하며 여러 기능을 수행해주는 미들웨어이다.

WAS는 보통 웹 서버의 기능을 품고 있다.

CGI는 프로토콜의 명칭이며 WAS는 프로그램(미들웨어)의 이름이라는 차이가 있으며 CGI는 웹 서버가 실행시킨 프로세스(php, perl, etc...)가 동적인 작업을 수행하며 WAS는 직접 동적인 작업을 수행한다.

WAS는 거의 대부분 자바 기반으로 동작되며 톰캣이 대표적이다.

## 서블릿

서블릿은 자바 코드를 사용하여 직접 웹 페이지를 생성하는 사양이나 클래스를 의미한다. 서블릿은 WAS 내에서 동작된다.